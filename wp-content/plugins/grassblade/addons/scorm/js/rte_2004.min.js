ADL.XAPIWrapper.changeConfig({isScorm2004:true});xapi.changeConfig("isScorm2004",true);var API_1484_11=function(a){var r=false;var i=false;var o=GB_SCORM.cache;var s=0;var e=this;var t={};var n={};return{getCache:function(){return o},Initialize:function(e){console_log("LMS Initialize");if(i||r){return"false"}i=true;if(a.scorm_version!="1.2"){ADL.XAPIWrapper.changeConfig({isScorm2004:true});xapi.changeConfig("isScorm2004",true)}xapi.initializeAttempt();return"true"},GetValue:function(e){var a=new Date;var t=a.toLocaleString();if(!i||r){return"false"}var a=new Date;var t=a.toLocaleString();if(e=="cmi.interactions._count"){varvalue_count=parseInt(++s);varvalue='"'+varvalue_count+'"';return varvalue_count}varvalue=o[e]===undefined?"":o[e];return o[e]},SetValue:function(e,a){var t=new Date;var n=t.toLocaleString();if(!i||r){return"false"}o["cmi.interactions._count"]=s;o[e]=a;xapi.saveDataValue(e,a);return"true"},Commit:function(e){if(!i||r){return"false"}console_log("LMS Commit");console_log(t);console_log(o);if(jQuery.isEmptyObject(t)||t["cmi.suspend_data"]!=o["cmi.suspend_data"]||t["cmi.lesson_status"]!=o["cmi.lesson_status"]||t["cmi.lesson_location"]!=o["cmi.lesson_location"]){t=o;console_log("LMS Commit Ajax");var a={scorm_version:GB_SCORM.scorm_version,data:o};jQuery.ajax({type:"POST",dataType:"json",url:GB_SCORM.ajax_url,data:{action:"grassblade_scorm_commit",params:a},success:function(e){},error:function(e){}})}return"true"},Terminate:function(e){if(!i||r){return"false"}console_log("LMS Finish");console_log(n);console_log(o);if(jQuery.isEmptyObject(n)||n["cmi.suspend_data"]!=o["cmi.suspend_data"]||n["cmi.lesson_status"]!=o["cmi.lesson_status"]||n["cmi.lesson_location"]!=o["cmi.lesson_location"]){n=o;console_log("LMS Finish Ajax");var a={scorm_version:GB_SCORM.scorm_version,data:o};jQuery.ajax({type:"POST",dataType:"json",url:GB_SCORM.ajax_url,data:{action:"grassblade_scorm_finish",params:a},success:function(e){},error:function(e){}})}return"true"},GetLastError:function(){return 0},GetDiagnostic:function(e){return"diagnostic string"},GetErrorString:function(e){return"error string"}}}(window);initializeCommunication=API_1484_11.Initialize;terminateCommunication=API_1484_11.Terminate;storeDataValue=API_1484_11.SetValue;retrieveDataValue=API_1484_11.GetValue;