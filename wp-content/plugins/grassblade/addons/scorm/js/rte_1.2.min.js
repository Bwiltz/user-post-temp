var API=function(e){var r=false;var o=false;var i=GB_SCORM.cache;var s=0;var t=this;var a={};var n={};return{getCache:function(){return i},LMSInitialize:function(e){console_log("LMS Initialize");if(o||r){return"false"}o=true;xapi.initializeAttempt();return"true"},LMSGetValue:function(e){var t=new Date;var a=t.toLocaleString();if(!o||r){return"false"}if(e=="cmi.interactions._count"){varvalue_count=parseInt(++s);varvalue='"'+varvalue_count+'"';return varvalue_count}varvalue=i[e]===undefined?"":i[e];return i[e]},LMSSetValue:function(e,t){var a=new Date;var n=a.toLocaleString();if(!o||r){return"false"}i["cmi.interactions._count"]=s;i[e]=t;xapi.saveDataValue(e,t);return"true"},LMSCommit:function(e){if(!o||r){return"false"}console_log("LMS Commit");console_log(a);console_log(i);if(jQuery.isEmptyObject(a)||a["cmi.suspend_data"]!=i["cmi.suspend_data"]||a["cmi.core.lesson_status"]!=i["cmi.core.lesson_status"]||a["cmi.core.lesson_location"]!=i["cmi.core.lesson_location"]){a=i;console_log("LMS Commit Ajax");var t={scorm_version:GB_SCORM.scorm_version,data:i};jQuery.ajax({type:"POST",dataType:"json",url:GB_SCORM.ajax_url,data:{action:"grassblade_scorm_commit",params:t},success:function(e){},error:function(e){}})}return"true"},LMSFinish:function(e){if(!o||r){return"false"}console_log("LMS Finish");console_log(n);console_log(i);if(jQuery.isEmptyObject(n)||n["cmi.suspend_data"]!=i["cmi.suspend_data"]||n["cmi.core.lesson_status"]!=i["cmi.core.lesson_status"]||n["cmi.core.lesson_location"]!=i["cmi.core.lesson_location"]){n=i;console_log("LMS Finish Ajax");var t={scorm_version:GB_SCORM.scorm_version,data:i};jQuery.ajax({type:"POST",dataType:"json",url:GB_SCORM.ajax_url,data:{action:"grassblade_scorm_finish",params:t},success:function(e){},error:function(e){}})}return"true"},LMSGetLastError:function(){return 0},LMSGetDiagnostic:function(e){return"diagnostic string"},LMSGetErrorString:function(e){return"error string"}}}(window);initializeCommunication=API.LMSInitialize;terminateCommunication=API.LMSFinish;storeDataValue=API.LMSSetValue;retrieveDataValue=API.LMSGetValue;